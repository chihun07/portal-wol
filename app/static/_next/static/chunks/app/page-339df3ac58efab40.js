(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4902:function(e,t,a){Promise.resolve().then(a.bind(a,6774))},7500:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var n=a(7437),r=a(2790),l=a(9496);function o(e){let{src:t}=e;return(0,n.jsx)("main",{className:"portal-main",children:(0,n.jsx)("iframe",{id:"portal-panel",className:"portal-panel",src:t,title:"Monitoring iframe",loading:"lazy"})})}var s=a(7138),i=a(2265);let c=["grafana","prom","kuma","netdata"],u={grafana:"https://mon-core.tail85b0de.ts.net:445/",prom:"https://mon-core.tail85b0de.ts.net/prometheus/targets",kuma:"https://mon-core.tail85b0de.ts.net:444/status/portal",netdata:"https://mon-core.tail85b0de.ts.net/netdata/"},d=[{id:"grafana",label:"Open Grafana",href:u.grafana,external:!0},{id:"prom",label:"Prometheus Targets",href:u.prom,external:!0},{id:"kuma",label:"Uptime Kuma",href:u.kuma,external:!0},{id:"netdata",label:"Netdata",href:u.netdata,external:!0},{id:"wol",label:"WOL Control",href:"/wol",accent:!0}];var h=a(8328);function m(e){let{activeView:t,onSelectView:a,onRefresh:r,onToggleTheme:l,theme:o,themeReady:u}=e,[m,f]=(0,i.useState)(!1),p=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(!m)return;let e=e=>{if(!p.current)return;let t=e.target;(null==t?void 0:t.closest(".portal-menu"))||f(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[m]);let b="light"===o?h.k:h.N;return(0,n.jsxs)("header",{className:"portal-header",children:[(0,n.jsxs)("div",{className:"portal-headbar",children:[(0,n.jsx)("span",{className:"portal-title",children:"Monitoring Portal"}),(0,n.jsx)("div",{className:"portal-spacer"}),(0,n.jsxs)("button",{id:"theme-toggle",type:"button",className:"theme-toggle",onClick:l,"aria-label":"light"===o?"Switch to dark theme":"Switch to light theme",children:[u?(0,n.jsx)(b,{className:"theme-toggle__icon",focusable:"false"}):(0,n.jsx)(h.N,{className:"theme-toggle__icon",focusable:"false"}),(0,n.jsx)("span",{id:"theme-label",children:"light"===o?"Dark":"Light"})]}),(0,n.jsx)("nav",{className:"portal-links","aria-label":"Monitoring services",children:d.map(e=>(0,n.jsx)(i.Fragment,{children:e.external?(0,n.jsx)("a",{className:"portal-link".concat(e.accent?" portal-link--cta":""),href:e.href,target:"_blank",rel:"noopener",children:e.label}):(0,n.jsx)(s.default,{className:"portal-link".concat(e.accent?" portal-link--cta":""),href:e.href,onClick:void 0,children:e.label})},e.id))}),(0,n.jsxs)("div",{className:"portal-menu",ref:p,children:[(0,n.jsx)("button",{id:"portal-menu-toggle",type:"button","aria-haspopup":"true","aria-expanded":m,onClick:()=>f(e=>!e),children:"More"}),(0,n.jsx)("div",{className:"portal-menu__dropdown",id:"portal-menu",role:"menu","aria-hidden":!m,children:d.map(e=>{var t;return(0,n.jsx)(i.Fragment,{children:(t=()=>f(!1),e.external?(0,n.jsx)("a",{className:"portal-menu__item".concat(e.accent?" portal-link--cta":""),href:e.href,target:"_blank",rel:"noopener",role:"menuitem",children:e.label}):(0,n.jsx)(s.default,{className:"portal-menu__item".concat(e.accent?" portal-link--cta":""),href:e.href,role:"menuitem",onClick:t,children:e.label}))},e.id)})})]})]}),(0,n.jsxs)("div",{className:"portal-tabs",role:"tablist",children:[(0,n.jsx)("button",{type:"button",id:"portal-refresh",className:"portal-tabs__button portal-tabs__button--refresh","aria-label":"Refresh current view",onClick:r,children:"â†»"}),c.map(e=>(0,n.jsx)("button",{type:"button",className:"portal-tabs__button".concat(t===e?" active":""),"data-view":e,"aria-selected":t===e,onClick:()=>a(e),children:function(e){switch(e){case"grafana":return"Grafana";case"prom":return"Prometheus";case"kuma":return"Uptime Kuma";case"netdata":return"Netdata";default:return e}}(e)},e))]})]})}function f(){var e;(0,r.r)("portal-body"),e="--portal-vh",(0,i.useEffect)(()=>{let t=()=>{let t=.01*window.innerHeight;document.documentElement.style.setProperty(e,"".concat(100*t,"px"))};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[e]);let{theme:t,toggleTheme:a,ready:s}=(0,l.F)(),{view:d,selectView:h,iframeSrc:f,refresh:p}=function(){var e;let[t,a]=(0,i.useState)(()=>(function(){var e;let t=null===(e=window.location.hash)||void 0===e?void 0:e.slice(1);return t&&c.includes(t)?t:"grafana"})()),[n,r]=(0,i.useState)(0);(0,i.useEffect)(()=>{let e=()=>{var e;let t=null===(e=window.location.hash)||void 0===e?void 0:e.slice(1);t&&c.includes(t)&&a(t)};return window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)},[]),(0,i.useEffect)(()=>{window.history.replaceState(null,"","#".concat(t))},[t]);let l=null!==(e=u[t])&&void 0!==e?e:u.grafana,o=(0,i.useMemo)(()=>{if(!n)return l;let e=l.includes("?")?"&":"?";return"".concat(l).concat(e,"_=").concat(n)},[l,n]);return{view:t,selectView:(0,i.useCallback)(e=>{a(e),r(0)},[]),iframeSrc:o,refresh:(0,i.useCallback)(()=>{r(Date.now())},[])}}();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m,{activeView:d,onSelectView:h,onRefresh:p,onToggleTheme:a,theme:t,themeReady:s}),(0,n.jsx)(o,{src:f})]})}},8328:function(e,t,a){"use strict";a.d(t,{N:function(){return l},k:function(){return o}});var n=a(7437);function r(e){let{children:t,...a}=e;return(0,n.jsx)("svg",{"aria-hidden":!0,viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.8,strokeLinecap:"round",strokeLinejoin:"round",fill:"none",...a,children:t})}function l(e){return(0,n.jsxs)(r,{...e,children:[(0,n.jsx)("circle",{cx:"12",cy:"12",r:"4.25"}),(0,n.jsx)("path",{d:"M12 2.25v2.5"}),(0,n.jsx)("path",{d:"M12 19.25v2.5"}),(0,n.jsx)("path",{d:"M4.75 4.75l1.75 1.75"}),(0,n.jsx)("path",{d:"M17.5 17.5l1.75 1.75"}),(0,n.jsx)("path",{d:"M2.25 12h2.5"}),(0,n.jsx)("path",{d:"M19.25 12h2.5"}),(0,n.jsx)("path",{d:"M4.75 19.25l1.75-1.75"}),(0,n.jsx)("path",{d:"M17.5 6.25l1.75-1.75"})]})}function o(e){return(0,n.jsx)(r,{...e,children:(0,n.jsx)("path",{d:"M20.5 15.75a8.5 8.5 0 0 1-11.25-11.25 0.75 0.75 0 0 0-.95-.95A8.5 8.5 0 1 0 20.5 16.7a0.75 0.75 0 0 0-.95-0.95Z",fill:"currentColor",stroke:"none"})})}},2790:function(e,t,a){"use strict";a.d(t,{r:function(){return r}});var n=a(2265);function r(e){(0,n.useEffect)(()=>{if("undefined"==typeof document)return;let{body:t}=document,a=t.className;return t.className=e,()=>{t.className=a}},[e])}},9496:function(e,t,a){"use strict";a.d(t,{F:function(){return l}});var n=a(2265);let r="wolweb_theme";function l(){let[e,t]=(0,n.useState)("dark"),[a,l]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e="light"===window.localStorage.getItem(r)?"light":"dark";t(e),document.documentElement.setAttribute("data-theme",e),l(!0)},[]);let o=(0,n.useCallback)(e=>{t(t=>{let a="function"==typeof e?e(t):e;return window.localStorage.setItem(r,a),document.documentElement.setAttribute("data-theme",a),a})},[]),s=(0,n.useCallback)(()=>{o(e=>"light"===e?"dark":"light")},[o]);return{theme:e,ready:a,setTheme:o,toggleTheme:s}}},6774:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return n.default}});var n=a(7500)}},function(e){e.O(0,[138,971,23,744],function(){return e(e.s=4902)}),_N_E=e.O()}]);